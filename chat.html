<html>
<head>
  <meta charset="utf-8">
  <title>掲示板</title>
  <style>
    #board {
      width: 80%;
      margin: auto;
      border: 1px solid black;
      padding: 10px;
    }
    #form {
      width: 80%;
      margin: auto;
      display: flex;
      flex-direction: column;
    }
    #name, #message {
      margin: 5px;
    }
    #submit {
      width: 100px;
      align-self: center;
    }
  </style>
</head>
<body>
  <h1>掲示板</h1>
  <div id="board"></div>
  <form id="form">
    <input type="text" id="name" placeholder="名前">
    <textarea id="message" placeholder="メッセージ"></textarea>
    <input type="submit" id="submit" value="投稿">
  </form>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.0.2/firebase-database.js"></script>
  <script>
    // Initialize Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyD-9tSrke72PouQMnMX-a7eZSW0jkFMBWY",
      authDomain: "fir-chat-6a5c6.firebaseapp.com",
      databaseURL: "https://fir-chat-6a5c6-default-rtdb.firebaseio.com",
      projectId: "fir-chat-6a5c6",
      storageBucket: "fir-chat-6a5c6.appspot.com",
      messagingSenderId: "388351944597",
      appId: "1:388351944597:web:e8f3ad39e537d3b2fd5f18"
    };
    firebase.initializeApp(firebaseConfig);

    // Get a reference to the database service
    var database = firebase.database();

    // Get a reference to the board element
    var board = document.getElementById("board");

    // Listen for new messages and append them to the board
    database.ref("messages").on("child_added", function(snapshot) {
      var message = snapshot.val();
      var name = message.name || "匿名";
      var content = message.content || "";
      var div = document.createElement("div");
      div.innerHTML = "<b>" + name + "</b>: " + content;
      board.appendChild(div);
    });

    // Get a reference to the form elements
    var form = document.getElementById("form");
    var name = document.getElementById("name");
    var message = document.getElementById("message");
    var submit = document.getElementById("submit");

    // Prevent the default form submission behavior
    form.addEventListener("submit", function(event) {
      event.preventDefault();
    });

    // Handle the submit button click
    submit.addEventListener("click", function() {
      // Get the user input
      var nameValue = name.value;
      var messageValue = message.value;

      // Validate the input
      if (nameValue == "" || messageValue == "") {
        alert("名前とメッセージを入力してください。");
        return;
      }

      // Push the message to the database
      database.ref("messages").push({
        name: nameValue,
        content: messageValue
      });

      // Clear the input fields
      name.value = "";
      message.value = "";
    });
  </script>
</html>
